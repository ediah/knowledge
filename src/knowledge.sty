\RequirePackage{amsmath,amsthm,amssymb}
\RequirePackage{mathtext}
\RequirePackage[T2A]{fontenc}
\RequirePackage[russian]{babel}
\RequirePackage{tikz}
\RequirePackage{cmap}
\RequirePackage{fancyhdr}
\RequirePackage{datetime}
\RequirePackage{diagbox}
\RequirePackage{listings}
\RequirePackage{color}

\newcounter{thrm}
\newcommand{\theorem}{
	\addtocounter{thrm}{1}
	\par\noindent\textbf{
		Теорема \arabic{section}.\arabic{thrm}
	}
}

\newcounter{lmmt}
\newcommand{\lemmata}{
	\addtocounter{lmmt}{1}
	\par\noindent\textbf{\\ Лемма \arabic{section}.\arabic{lmmt}}
}

\newcommand{\prove}[1]{

	\noindent \begin{tikzpicture}
		\filldraw    (0,   0) -- (0.3,  0  ) -- (0, -0.3);
		\draw[thick] (0.3, 0) -- (0.3, -0.3) -- (0, -0.3);
	\end{tikzpicture}
	#1
	\nopagebreak \begin{flushright}
		\begin{tikzpicture}
			\filldraw    (0, 0) -- (0.3, 0.3) -- (0.3, 0  );
			\draw[thick] (0, 0) -- (0,   0.3) -- (0.3, 0.3);
		\end{tikzpicture}
	\end{flushright}
}

\addto\captionsrussian{\renewcommand{\chaptername}{Часть}}

\newcounter{task}
\newcommand{\task}[1]{
	\addtocounter{task}{1}
	\par\noindent\textbf{\\ Задача \arabic{section}.\arabic{task} }
	#1
	\par\noindent\textbf{Решение.}
}

\newcommand{\lege}[2]{
	\left( \frac{#1}{#2} \right)
}

\newcommand{\gen}[1]{
	\langle #1 \rangle
}

\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{}
\fancyhead[LE,RO]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\leftmark}
\fancyhead[RE]{\bfseries\rightmark}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{0.5pt}
\fancypagestyle{plain}{
   \fancyhead{}
   \renewcommand{\headrulewidth}{0pt}
}

\makeatletter
\renewcommand\chapter{
	\par
	\@afterindentfalse \secdef\@chapter\@schapter
}
\makeatother  

\makeatletter
\renewcommand\section{
	\setcounter{task}{0}
	\@startsection {section}{1}{\z@}
		{-3.5ex \@plus -1ex \@minus -.2ex}
		{2.3ex \@plus.2ex}
		{\normalfont\Large\bfseries}
}
\makeatother

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Python,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3,
  extendedchars=\true,
  keepspaces=true
}